<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>ROADS Viewer</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://unpkg.com/maplibre-gl@3.6.0/dist/maplibre-gl.css" rel="stylesheet" />
<script src="https://unpkg.com/maplibre-gl@3.6.0/dist/maplibre-gl.js"></script>

<style>
  body { margin: 0; padding: 0; }
  #map { width: 100vw; height: 100vh; }
</style>
</head>

<body>
<div id="map"></div>

<script>
// ---------------------------
// Map initialization
// ---------------------------
const map = new maplibregl.Map({
  container: "map",
  style: {
    version: 8,
    sources: {
      basemap: {
        type: "raster",
        tiles: ["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],
        tileSize: 256
      },
      local: {
        type: "vector",
        tiles: ["http://127.0.0.1:5000/TIGER2018_PRISECROADS/{z}/{x}/{y}.mvt"],
        minzoom: 0,
        maxzoom: 14
      }
    },
    layers: [
      {
        id: "basemap",
        type: "raster",
        source: "basemap"
      },

      // ---------------------------
      // PRIMARY ROADS (RTTYP = M)
      // ---------------------------
      {
        id: "roads-primary",
        type: "line",
        source: "local",
        "source-layer": "layer0",
        filter: ["==", ["get", "RTTYP"], "M"],
        paint: {
          "line-color": "#ff0000",
          "line-width": [
            "interpolate",
            ["linear"],
            ["zoom"],
            4, 1.5,
            8, 3.0,
            12, 5.0
          ],
          "line-opacity": 0.95
        }
      },

      // ---------------------------
      // SECONDARY ROADS (RTTYP = S)
      // ---------------------------
      {
        id: "roads-secondary",
        type: "line",
        source: "local",
        "source-layer": "layer0",
        filter: ["==", ["get", "RTTYP"], "S"],
        paint: {
          "line-color": "#ffa500",
          "line-width": [
            "interpolate",
            ["linear"],
            ["zoom"],
            4, 1.2,
            8, 2.0,
            12, 3.0
          ],
          "line-opacity": 0.9
        }
      },

      // ---------------------------
      // LOCAL ROADS (RTTYP = C)
      // ---------------------------
      {
        id: "roads-local",
        type: "line",
        source: "local",
        "source-layer": "layer0",
        filter: ["==", ["get", "RTTYP"], "C"],
        paint: {
          "line-color": "#cccccc",
          "line-width": [
            "interpolate",
            ["linear"],
            ["zoom"],
            4, 0.8,
            8, 1.2,
            12, 2.0
          ],
          "line-opacity": 0.85
        }
      },

      // ---------------------------
      // RAMPS / CONNECTORS (RTTYP = P)
      // ---------------------------
      {
        id: "roads-ramps",
        type: "line",
        source: "local",
        "source-layer": "layer0",
        filter: ["==", ["get", "RTTYP"], "P"],
        paint: {
          "line-color": "#ffff00",
          "line-width": [
            "interpolate",
            ["linear"],
            ["zoom"],
            4, 0.8,
            8, 1.2,
            12, 2.0
          ],
          "line-opacity": 0.85
        }
      },

      // ---------------------------
      // TRAILS (RTTYP = T)
      // ---------------------------
      {
        id: "roads-trails",
        type: "line",
        source: "local",
        "source-layer": "layer0",
        filter: ["==", ["get", "RTTYP"], "T"],
        paint: {
          "line-color": "#8b4513",
          "line-width": 1.0,
          "line-dasharray": [2, 2],
          "line-opacity": 0.8
        }
      }
    ]
  },

  center: [-98, 38],
  zoom: 4
});

map.addControl(new maplibregl.NavigationControl());
</script>

</body>
</html>
